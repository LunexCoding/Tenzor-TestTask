# Tenzor-TestTask

Python: 3.11

Склогируйте репозиторий:
`git clone https://github.com/LunexCoding/Tenzor-TestTask.git`

Перейдите в каталог репозитория:
`cd Tenzor-TestTask`

Создание виртуального окружения:

+ Windows:
`python -m venv venv`

+ Linux:
`python3 -m venv venv`

Активация виртуального окружения:

+ Windows:
`.\venv\Scripts\activate`

+ Linux:
`source myenv/bin/activate`

Установка зависимостей:
`pip install -r requirements.txt`

---

При необходимости можно разместить в каталоге `drivers` или указать свой каталог в `DRIVERS_DIRECTORY` в файле конфигурации `.env`. 

Делать это необязательно. Selenium сам скачет драйвер, разместит его в `C:\Users\{user}\.cache\selenium` и будет использовать именно его.

---

Класс `driver.Browser`: Этот класс представляет браузер и включает методы для работы с элементами страницы и управления веб-драйвером.

В конструкторе инициализируем веб-драйвер, загружаем настройки. 

В конструктор драйвера какого-либо браузера раньше (в устаревшей версии Selenium) передавался обязательный аргумент `executable_path`. Сейчас это не обязательно.

Selenium попробует сам найти файл драйвера для необходимого браузера. Если такого драйвера нет, Selenium сам скачает драйвер в `C:\Users\{user}\.cache\selenium`. При этом необязательно иметь этот браузер на ПК.

Рекомендуется все же указывать путь к конкретному драйверу. Сейчас это делается путем передачи следующих объектов в конструктор драйвера:

+ `selenium.webdriver.{browser}.service.Service(executable_path=path_to_draiver)`
+ `webdriver.{browser}Options()` - дополнительные параметры для браузера, например `--headless`, работа в фоне.

Это все можно увидеть в `consts.py`

> Очень важно чтобы версия браузера и драйвера были совместимы!

```python
try:
    self._driver = self._settings.driver(service=self._settings.service, options=self._settings.options)
except (NoSuchDriverException, SessionNotCreatedException):
    self._driver = self._settings.driver(options=self._settings.options)
```

---

Класс `Scenario`: Представляет собой сценарий, последовательность выполняемых действий.

Инициализация слотов: В методе `initializeSlots` инициализируются слоты, которые будут использоваться для передачи данных между действиями в сценарии.

Установка входных данных: Метод `getInput` используется для получения входных данных для каждого действия. Эти данные извлекаются из слотов, которые были предварительно установлены.

Установка выходных данных: После выполнения каждого действия его выходные данные записываются в слоты с помощью метода `setOutput`. Эти данные могут быть использованы другими действиями в последующих шагах сценария.

Выполнение сценария: Метод `perform` выполняет каждое действие из списка `self.actions` и передает ему соответствующие входные данные. После выполнения действия проверяется успешность его выполнения. Если действие завершилось неудачно, выполнение сценария прерывается, и возвращается `False`.

---

Класс `Action`: Представляет базовое действие.

Конструктор инициализирует список выходных слотов действия. Он также может добавлять дополнительные динамические выходные слоты при необходимости.

Метод `addDynamicOutputSlots` позволяет добавлять динамические выходные слоты к списку выходных слотов действия.

Каждый Action имеет выходной слот по умолчанию: слот статуса выполнения действия `success`.

---

Тестирование. Раньше с `Pytest` не сталкивался, только с `unittest`.

Реализованы простейшие тесты для класса `driver.Browser`.

Отдельные Action'ы нет смысла пробовать тестировать. Практически все они привязаны к данному тестовому заданию.

---

[WakaTime](https://wakatime.com/@LunexCoding/projects/hxkfcsocud?start=2024-05-09&end=2024-05-15)

Задание было интересным. Данное решение можно доработать и вполне использовать.

P.S. Можно было сделать лучше, не было достаточного количества свободного времени, 4-ый курс.
